(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7558)}])},7328:(e,t,n)=>{e.exports=n(9269)},7558:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var o=n(7876),s=n(4232),i=n(7328),a=n.n(i);let l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365;if("undefined"==typeof document)return;let o=new Date(Date.now()+864e5*n).toUTCString();document.cookie="".concat(e,"=").concat(t,"; expires=").concat(o,"; path=/")};function r(){let[e,t]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e="light"===(e=>{if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:null})("sitelook");t(!e),e?(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light")):(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light"))},[]),(0,o.jsx)("div",{className:"toggle-container",onClick:()=>{let n=!e;t(n),n?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light"),l("sitelook","dark")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),l("sitelook","light"))},role:"button","aria-label":"Toggle dark mode",children:(0,o.jsx)("div",{className:"toggle-dot ".concat(e?"dark":"light")})})}function c(e){let{onNodeSelect:t,className:n="",onNodeClick:i,highlightedNode:a,onHighlightReceived:l,selectedNode:r,compact:c=!1}=e,[d,h]=(0,s.useState)([]),[u,m]=(0,s.useState)(null),[x,g]=(0,s.useState)(!0),p=(0,s.useRef)(null),f=void 0!==r?r:u;(0,s.useEffect)(()=>{b()},[]),(0,s.useEffect)(()=>{if(a&&l){l(a);let e=document.querySelector('[data-node-id="'.concat(a.node_id,'"]'));e&&p.current&&e.scrollIntoView({behavior:"smooth",block:"center"})}},[a,l]);let y=e=>{let t=[],n="",o=!1;for(let s=0;s<e.length;s++){let i=e[s];'"'===i&&(0===s||","===e[s-1])?o=!0:'"'===i&&o&&(s===e.length-1||","===e[s+1])?o=!1:","!==i||o?n+=i:(t.push(n.trim()),n="")}return t.push(n.trim()),t},b=async()=>{try{let e=await fetch("/data-pipeline/nodes.csv");if(e.ok){let t=(await e.text()).split("\n").filter(e=>e.trim()),n=y(t[0]),o=[];for(let e=1;e<t.length;e++){let s=y(t[e]);if(s.length>=n.length-1){let e={};n.forEach((t,n)=>{e[t.trim()]=s[n]?s[n].trim():""}),o.push(e)}}h(o)}else{let e=await fetch("".concat("/data-pipeline/admin","/api/nodes"));if(e.ok){let t=await e.json();h(t)}else h(v())}}catch(e){console.error("Failed to load nodes:",e),h(v())}finally{g(!1)}},v=()=>[{node_id:"eco_001",name:"Economic Data Fetcher",description:"Fetches economic data from USEEIO API",type:"data_fetcher",order:1,processing_time_est:"medium",folder_size:"207M"},{node_id:"zip_001",name:"Zipcode Metrics Generator",description:"Generates zipcode metrics from Census ZBP API",type:"data_processor",order:2,processing_time_est:"fast",folder_size:"24K"},{node_id:"naics_001",name:"NAICS Timeline Aggregator",description:"Aggregates NAICS data across years (2017-2020)",type:"data_aggregator",order:5,processing_time_est:"medium",folder_size:"20K"},{node_id:"ml_001",name:"Random Forest Automator",description:"Automates random forest analysis for poverty prediction",type:"ml_processor",order:9,processing_time_est:"slow",folder_size:"375M"},{node_id:"trade_001",name:"Comtrade Data Fetcher",description:"Fetches trade data from UN Comtrade API",type:"api_fetcher",order:20,processing_time_est:"medium",folder_size:"15M"}];return x?(0,o.jsx)("div",{className:"panel p-6 ".concat(n),children:(0,o.jsxs)("div",{className:"animate-pulse",children:[(0,o.jsx)("div",{className:"h-4 bg-dark-panel-alt rounded mb-4"}),(0,o.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,o.jsx)("div",{className:"h-12 bg-dark-panel-alt rounded"},t))})]})}):(0,o.jsxs)("div",{className:"".concat(c?"":"panel"," p-4 ").concat(n),children:[(0,o.jsx)("h2",{className:"".concat(c?"text-lg mb-2":"text-xl mb-3"," text-gray-100 light:text-gray-900"),children:"Nodes"}),(0,o.jsx)("div",{className:"".concat(c?"space-y-1":"space-y-2"),ref:p,children:d.map(e=>(0,o.jsxs)("div",{"data-node-id":e.node_id,className:"".concat(c?"p-2":"p-3"," rounded-lg cursor-pointer transition-all duration-200 border select-text ").concat((null==a?void 0:a.node_id)===e.node_id?"bg-yellow-500/20 border-yellow-500/50 animate-pulse":(null==f?void 0:f.node_id)===e.node_id?"bg-blue-500/10 border-blue-500/30":"bg-gray-700 hover:bg-gray-600 border-gray-600 hover:border-cyan-400/30 light:bg-gray-100 light:hover:bg-gray-50 light:border-gray-300 light:hover:border-cyan-500/30"),onClick:n=>((e,n)=>{let o=window.getSelection();o&&o.toString().length>0||(void 0===r&&m(n),null==t||t(n),null==i||i())})(0,e),children:[(0,o.jsxs)("div",{className:"flex items-start justify-between ".concat(c?"mb-1":"mb-2"),children:[(0,o.jsx)("div",{className:"flex items-center gap-2",children:(0,o.jsx)("span",{className:"text-sm font-mono text-gray-400",children:e.node_id})}),!c&&(0,o.jsx)("span",{className:"text-xs text-gray-400",children:e.folder_size})]}),(0,o.jsx)("h3",{className:"font-semibold ".concat(c?"text-xs":"text-sm"," mb-1 text-gray-100 light:text-gray-900"),children:e.name}),!c&&(0,o.jsx)("p",{className:"text-xs text-muted mb-2 line-clamp-2",children:e.description}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("span",{className:"text-xs font-medium ".concat({data_fetcher:"text-blue-400",data_processor:"text-cyan-400",data_aggregator:"text-emerald-400",ml_processor:"text-orange-400",api_fetcher:"text-blue-400"}[e.type]||"text-gray-400"),children:e.type.replace("_"," ")}),!c&&(0,o.jsxs)("span",{className:"text-xs text-gray-400",children:["#",e.order]})]})]},e.node_id))})]})}function d(e){let{className:t="",onNodeSelect:n,isFloating:i=!1,hideTitle:a=!1,onHighlightInList:l,focusedNode:r=null}=e,[c,d]=(0,s.useState)([]),[h,u]=(0,s.useState)([]),[m,x]=(0,s.useState)([]),[g,p]=(0,s.useState)(!0),[f,y]=(0,s.useState)(null),[b,v]=(0,s.useState)({x:0,y:0}),[j,N]=(0,s.useState)(!1),[w,_]=(0,s.useState)({x:0,y:0}),[k,E]=(0,s.useState)({x:0,y:0}),[S,C]=(0,s.useState)(null),[z,L]=(0,s.useState)(null),[R,M]=(0,s.useState)(null),[F,P]=(0,s.useState)({x:0,y:0}),[D,I]=(0,s.useState)([]),T=(0,s.useRef)(null);(0,s.useEffect)(()=>{A()},[]),(0,s.useEffect)(()=>{if(!r||0===c.length)return;let e=r.node_id;c.find(t=>t.id===e)&&(0===D.length&&I(c.map(e=>({...e,position:[...e.position]}))),d(c.map(t=>{if(t.id===e)return{...t,position:[50,200]};let n=c.filter(t=>t.id!==e).indexOf(t);if(n>=0){let e=Math.floor(n/2);return{...t,position:[300+n%2*250,100+120*e]}}return t})))},[null==r?void 0:r.node_id]),(0,s.useEffect)(()=>{!r&&D.length>0&&(d(D),I([]))},[r]);let A=async()=>{try{let e="/data-pipeline",t=await fetch("".concat(e,"/nodes.csv"));if(t.ok){let e=(await t.text()).split("\n").filter(e=>e.trim()),n=e[0].split(",").map(e=>e.trim()),o=[];for(let t=1;t<e.length;t++){let s=e[t].split(",");if(s.length>=n.length-1){let e={};n.forEach((t,n)=>{e[t.trim()]=s[n]?s[n].trim():""}),o.push(e)}}x(o)}let n=await fetch("".concat(e,"/nodes.json"));if(n.ok){let e=await n.json();d(e.nodes||[]),u(e.connections||{})}else O()}catch(e){console.error("Failed to load flow data:",e),O()}finally{p(!1)}},O=()=>{d([{id:"trigger",name:"Start Pipeline",position:[100,300],type:"trigger"},{id:"eco_001",name:"Economic Data Fetcher",position:[300,100],type:"data_fetcher"},{id:"zip_001",name:"Zipcode Metrics",position:[500,200],type:"data_processor"},{id:"naics_001",name:"NAICS Timeline",position:[700,300],type:"data_aggregator"},{id:"ml_001",name:"ML Processor",position:[900,400],type:"ml_processor"}]),u({"Start Pipeline":{main:[[{node:"Economic Data Fetcher",type:"main",index:0}]]},"Economic Data Fetcher":{main:[[{node:"Zipcode Metrics",type:"main",index:0}]]},"Zipcode Metrics":{main:[[{node:"NAICS Timeline",type:"main",index:0}]]},"NAICS Timeline":{main:[[{node:"ML Processor",type:"main",index:0}]]}})},X=e=>({trigger:"#10b981",data_fetcher:"#3b82f6",data_processor:"#06b6d4",data_aggregator:"#10b981",ml_processor:"#f59e0b",api_fetcher:"#8b5cf6"})[e]||"#6b7280",Y=(e,t)=>{e.preventDefault(),e.stopPropagation();let n=T.current.getBoundingClientRect(),o=T.current.createSVGPoint();o.x=e.clientX-n.left,o.y=e.clientY-n.top;let s=o.matrixTransform(T.current.getScreenCTM().inverse());E({x:e.clientX,y:e.clientY}),y(t.id),v({x:s.x-t.position[0],y:s.y-t.position[1]})},U=e=>{if(f&&T.current){let t=T.current.getBoundingClientRect(),n=T.current.createSVGPoint();n.x=e.clientX-t.left,n.y=e.clientY-t.top;let o=n.matrixTransform(T.current.getScreenCTM().inverse());d(e=>e.map(e=>e.id===f?{...e,position:[o.x-b.x,o.y-b.y]}:e))}else if(j&&i){let t=e.clientX-w.x,n=e.clientY-w.y;d(e=>e.map(e=>({...e,position:[e.position[0]+t,e.position[1]+n]}))),_({x:e.clientX,y:e.clientY})}},H=e=>{if(f&&5>Math.sqrt(Math.pow(e.clientX-k.x,2)+Math.pow(e.clientY-k.y,2))){let t=c.find(e=>e.id===f);t&&((e,t)=>{if(5>Math.sqrt(Math.pow(e.clientX-k.x,2)+Math.pow(e.clientY-k.y,2))&&n){let e=m.find(e=>e.node_id===t.id);e?n(e):n({node_id:t.id,name:t.name,description:"Pipeline node: ".concat(t.name),type:t.type})}})(e,t)}y(null),v({x:0,y:0}),N(!1)};return((0,s.useEffect)(()=>{if(f||j)return document.addEventListener("mousemove",U),document.addEventListener("mouseup",H),()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",H)}},[f,b,j,w]),(0,s.useEffect)(()=>{let e=e=>{z&&!e.target.closest(".node-menu")&&L(null)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[z]),g)?(0,o.jsx)("div",{className:"panel p-8 ".concat(t),children:(0,o.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-accent-cyan border-t-transparent"})})}):(0,o.jsxs)("div",{className:"panel p-6 ".concat(t),children:[!a&&(0,o.jsx)("h2",{className:"text-xl mb-6 text-gray-100 light:text-gray-900",children:"Pipeline Flow"}),(0,o.jsxs)("div",{className:"relative overflow-auto bg-gray-700 light:bg-gray-300 rounded-lg ".concat(i?"cursor-grab":""),style:{height:a?"calc(100% - 24px)":"600px",overflowX:"auto",overflowY:"auto"},onMouseDown:e=>{i&&!f&&(e.preventDefault(),N(!0),_({x:e.clientX,y:e.clientY}))},children:[(0,o.jsxs)("svg",{ref:T,className:"w-full h-full",viewBox:"0 0 1200 800",style:{minWidth:"1200px",minHeight:"800px"},children:[(0,o.jsx)("defs",{children:(0,o.jsx)("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:(0,o.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#06b6d4"})})}),(()=>{let e=[];return Object.entries(h).forEach(t=>{var n,s;let[i,a]=t,l=c.find(e=>e.name===i);l&&(null==(s=a.main)||null==(n=s[0])||n.forEach((t,n)=>{let s,a,r,d,h,u=c.find(e=>e.name===t.node);if(!u)return;let m=l.position[0]+200,x=l.position[1]+50,g=l.position[1],p=l.position[1]+25,f=u.position[0],y=u.position[1],b=u.position[1]+50,v=u.position[0]+100,j=u.position[1]+25,N=f<m+50,w=y>p,_=b<p,k=y>x-25,E=b<g+25;if(N||_||w)if(k&&N)s=m,a=p,r=v,d=y-20,h="M ".concat(s," ").concat(a," C ").concat(s+50," ").concat(a,", ").concat(r," ").concat(d-50,", ").concat(r," ").concat(d);else if(E&&N)s=m,a=p,r=v,d=b+20,h="M ".concat(s," ").concat(a," C ").concat(s+50," ").concat(a,", ").concat(r," ").concat(d+50,", ").concat(r," ").concat(d);else if(k&&!N)s=l.position[0]+100,a=x,r=v,d=y-20,h="M ".concat(s," ").concat(a," C ").concat(s," ").concat(a+50,", ").concat(r," ").concat(d-50,", ").concat(r," ").concat(d);else if(E&&!N)s=l.position[0]+100,a=g,r=v,d=b+20,h="M ".concat(s," ").concat(a," C ").concat(s," ").concat(a-50,", ").concat(r," ").concat(d+50,", ").concat(r," ").concat(d);else if(s=m,a=p,r=f-20,d=j,r>s){let e=Math.max(40,.25*Math.abs(d-a));h="M ".concat(s," ").concat(a," C ").concat(s+e," ").concat(a,", ").concat(r-e," ").concat(d,", ").concat(r," ").concat(d)}else h="M ".concat(s," ").concat(a,"\n                        C ").concat(s+50," ").concat(a,",\n                          ").concat(s+50," ").concat((a+d)/2,",\n                          ").concat((s+r)/2," ").concat((a+d)/2,"\n                        C ").concat(r-50," ").concat((a+d)/2,",\n                          ").concat(r-50," ").concat(d,",\n                          ").concat(r," ").concat(d);else{s=m,a=p,r=f-20;let e=Math.max(40,.25*Math.abs((d=j)-a));h="M ".concat(s," ").concat(a," C ").concat(s+e," ").concat(a,", ").concat(r-e," ").concat(d,", ").concat(r," ").concat(d)}e.push((0,o.jsx)("g",{children:(0,o.jsx)("path",{d:h,fill:"none",className:"flow-connection",markerEnd:"url(#arrowhead)"})},"".concat(i,"-").concat(t.node,"-").concat(n)))}))}),e})(),c.sort((e,t)=>f===t.id?1:f===e.id?-1:0).map(e=>{var t,n,s;return(0,o.jsxs)("g",{style:{opacity:R===e.id?1:.9},children:[(0,o.jsx)("rect",{x:e.position[0],y:e.position[1],width:"200",height:R===e.id?"120":"50",rx:"8",ry:"8",fill:X(e.type),fillOpacity:"0.1",stroke:X(e.type),strokeWidth:"2",className:"hover:fill-opacity-20 transition-all duration-200 ".concat(f===e.id?"fill-opacity-30 cursor-grabbing":"cursor-pointer"),onMouseDown:t=>Y(t,e),onMouseEnter:()=>C(e.id),onMouseLeave:()=>C(null),style:{cursor:f===e.id?"grabbing":S===e.id?"grab":"pointer"}}),(0,o.jsx)("text",{x:e.position[0]+100,y:e.position[1]+(R===e.id?20:30),textAnchor:"middle",className:"text-sm font-medium fill-current text-gray-100 pointer-events-none select-none",onMouseDown:t=>Y(t,e),children:e.name}),R===e.id&&(0,o.jsxs)("g",{children:[(0,o.jsxs)("text",{x:e.position[0]+100,y:e.position[1]+45,textAnchor:"middle",className:"text-xs fill-current text-gray-200 pointer-events-none select-none",children:["ID: ",e.id]}),(0,o.jsxs)("text",{x:e.position[0]+100,y:e.position[1]+62,textAnchor:"middle",className:"text-xs fill-current text-gray-200 pointer-events-none select-none",children:["Type: ",null==(t=e.type)?void 0:t.replace("_"," ")]}),(0,o.jsx)("text",{x:e.position[0]+100,y:e.position[1]+79,textAnchor:"middle",className:"text-xs fill-current text-gray-200 pointer-events-none select-none",children:"Status: Active"}),(null==(n=m.find(t=>t.node_id===e.id))?void 0:n.description)&&(0,o.jsxs)("text",{x:e.position[0]+100,y:e.position[1]+96,textAnchor:"middle",className:"text-xs fill-current text-gray-200 pointer-events-none select-none",children:[null==(s=m.find(t=>t.node_id===e.id))?void 0:s.description.substring(0,30),"..."]})]}),(0,o.jsxs)("g",{className:"node-menu",children:[(0,o.jsx)("circle",{cx:e.position[0]+185,cy:e.position[1]+15,r:"12",fill:"rgba(0,0,0,0.1)",className:"hover:fill-opacity-20 cursor-pointer",onClick:t=>{t.stopPropagation();let n=T.current.getBoundingClientRect();P({x:t.clientX-n.left,y:t.clientY-n.top}),L(z===e.id?null:e.id)}}),(0,o.jsx)("text",{x:e.position[0]+185,y:e.position[1]+20,textAnchor:"middle",className:"text-xs fill-current text-gray-300 pointer-events-none select-none",style:{fontSize:"10px"},children:"⋮"})]})]},e.id)})]}),z&&(0,o.jsxs)("div",{className:"absolute bg-gray-800 border border-gray-600 rounded-lg shadow-lg py-2 z-50 light:bg-gray-200 light:border-gray-400",style:{left:"".concat(F.x,"px"),top:"".concat(F.y,"px")},children:[(0,o.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-100 hover:bg-gray-700 light:text-gray-900 light:hover:bg-gray-100",onClick:()=>{let e=m.find(e=>e.node_id===z);e&&l&&l(e),L(null)},children:"Select in list"}),(0,o.jsx)("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-100 hover:bg-gray-700 light:text-gray-900 light:hover:bg-gray-100",onClick:()=>{M(R===z?null:z),L(null)},children:R===z?"Collapse Node":"Expand Node"})]})]})]})}let h="http://localhost:5001",u="".concat(h,"/health"),m=null,x=null;async function g(){return null!==m?m:x||(x=fetch(u,{method:"GET",mode:"cors",cache:"no-cache",signal:AbortSignal.timeout(2e3)}).then(e=>e.ok?(m=!0,!0):(m=!1,!1)).catch(e=>(m=!1,!1)).finally(()=>{x=null}))}function p(e){var t,n;let{node:i,onUpdateNode:a,onRunNode:l,flaskAvailable:r}=e,[c,d]=(0,s.useState)((null==i?void 0:i.todos)||""),[u,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(!1),[p,f]=(0,s.useState)(null);if(!i)return(0,o.jsx)("div",{className:"panel p-8 flex items-center justify-center text-center",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-700 flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD27"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-100 mb-2",children:"Select a Node"}),(0,o.jsx)("p",{className:"text-muted",children:"Choose a pipeline node from the list to view details and controls"})]})});let y=async()=>{try{(await fetch("".concat("/data-pipeline/admin","/api/nodes/update"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({node_id:i.node_id,todos:c})})).ok?(null==a||a({...i,todos:c}),alert("TODOs updated successfully!")):alert("Failed to update TODOs")}catch(e){console.error("Error updating TODOs:",e),alert("Error updating TODOs")}},b=async()=>{if(!i.python_cmds)return void alert("No Python command available for this node");g(!0),f(null);try{let e=await fetch(!0===r?"".concat(h,"/api/nodes/run"):"/data-pipeline/admin/api/nodes/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({node_id:i.node_id,command:i.python_cmds,working_directory:i.link})}),t=await e.json();f(t),null==l||l(i,t)}catch(e){console.error("Error running node:",e),f({success:!1,error:e.message})}finally{g(!1)}};return(0,o.jsxs)("div",{className:"panel space-y-6 select-text",style:{padding:"29px"},children:[(0,o.jsxs)("div",{className:"border-b border-gray-700 pb-4",children:[(0,o.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("span",{className:"text-2xl",children:{data_fetcher:"\uD83D\uDCE5",data_processor:"⚙️",data_aggregator:"\uD83D\uDCCA",ml_processor:"\uD83E\uDD16",api_fetcher:"\uD83C\uDF10",data_cleaner:"\uD83E\uDDF9",data_merger:"\uD83D\uDD17",structure_creator:"\uD83D\uDCC1",batch_processor:"⚡"}[i.type]||"\uD83D\uDD27"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-gray-100",children:i.name}),(0,o.jsx)("p",{className:"text-sm font-mono text-cyan-400",children:i.node_id})]})]}),(0,o.jsx)("span",{className:"text-sm font-medium px-3 py-1 rounded-full border ".concat("yes"===i.n8n_parallel_safe?"text-emerald-400 border-emerald-400/30 bg-emerald-400/10":"text-orange-400 border-orange-400/30 bg-orange-400/10"),children:"yes"===i.n8n_parallel_safe?"Parallel Safe":"Sequential Only"})]}),(0,o.jsx)("p",{className:"text-muted",children:i.description})]}),(0,o.jsxs)("div",{className:"grid gap-4",style:{gridTemplateColumns:"minmax(110px, 1fr) 2fr"},children:[(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-100 mb-1",children:"Processing Time"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("span",{className:"text-sm bg-gray-700 px-3 py-1 rounded-lg",children:i.processing_time_est}),"yes"===i.rate_limited&&(0,o.jsx)("span",{className:"text-xs text-orange-400",children:"⚠️ Rate Limited"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-100 mb-1",children:"Folder Size"}),(0,o.jsx)("span",{className:"text-sm bg-gray-700 px-3 py-1 rounded-lg",children:i.folder_size})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-100 mb-1",children:"Dependencies"}),(0,o.jsx)("div",{className:"flex flex-wrap gap-1",children:null==(t=i.dependencies)?void 0:t.split(",").map((e,t)=>(0,o.jsx)("span",{className:"text-xs bg-blue-500/10 text-blue-400 px-2 py-1 rounded",children:e.trim()},t))})]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-100 mb-1",children:"Python Path"}),(0,o.jsx)("span",{className:"text-sm bg-gray-700 px-3 py-1 rounded-lg font-mono",children:i.link})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-100 mb-1",children:"Output Path"}),(0,o.jsx)("span",{className:"text-sm bg-gray-700 px-3 py-1 rounded-lg font-mono",children:null==(n=i.output_path)?void 0:n.replace(/^(\.\.\/)+/,"")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-100 mb-1",children:"Data Sources"}),(0,o.jsx)("span",{className:"text-sm text-muted",children:i.data_sources})]}),i.api_keys_required&&"none"!==i.api_keys_required&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-100 mb-1",children:"API Keys Required"}),(0,o.jsx)("span",{className:"text-sm text-orange-400",children:i.api_keys_required})]})]})]}),i.python_cmds&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-100 mb-2",children:"Python Command"}),(0,o.jsx)("div",{className:"bg-gray-700 rounded-lg p-3 mb-3",children:(0,o.jsx)("code",{className:"text-sm font-mono text-cyan-400",children:i.python_cmds})}),!1===r&&(0,o.jsxs)("div",{className:"mb-3 p-3 bg-orange-500/10 border border-orange-500/30 rounded-lg",children:[(0,o.jsx)("p",{className:"text-sm text-orange-300 light:text-orange-700",children:"⚠️ Flask server not available. Using Next.js API fallback."}),(0,o.jsx)("a",{href:"/cloud/run/",target:"_blank",className:"text-sm text-blue-400 hover:text-blue-300 underline mt-1 inline-block",children:"View setup instructions →"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("button",{onClick:b,disabled:x||i.run_process_available&&"no"===i.run_process_available.toLowerCase(),className:"btn-primary ".concat(x?"opacity-50 cursor-not-allowed":""," ").concat(i.run_process_available&&"no"===i.run_process_available.toLowerCase()?"opacity-50 cursor-not-allowed":""),children:x?"\uD83D\uDD04 Running...":"▶️ Run Process"}),(0,o.jsxs)("span",{className:"text-sm ".concat(x?"text-orange-400":(null==p?void 0:p.success)?"text-emerald-400":(null==p?void 0:p.success)===!1?"text-red-500":"text-gray-400"),children:[x&&"Running...",(null==p?void 0:p.success)===!0&&"✅ Success",(null==p?void 0:p.success)===!1&&"❌ Failed"]})]}),!0===r&&(0,o.jsx)("div",{className:"mt-2 text-xs text-green-400",children:"✓ Using Flask server (port 5001)"})]}),p&&(0,o.jsxs)("div",{className:"rounded-lg p-4 ".concat(p.success?"bg-emerald-500/10 border border-emerald-500/30":"bg-red-500/10 border border-red-500/30"),children:[(0,o.jsx)("h4",{className:"font-medium mb-2",children:"Execution Result:"}),(0,o.jsx)("pre",{className:"text-sm font-mono overflow-auto max-h-32",children:p.output||p.stderr||p.error})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-100 mb-2",children:"Team TODOs"}),(0,o.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),className:"w-full h-24 bg-gray-700 border border-gray-600 rounded-lg p-3 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-100",placeholder:""}),(0,o.jsx)("button",{onClick:y,className:"btn-accent mt-2",children:"\uD83D\uDCBE Update TODOs"})]}),(0,o.jsx)("div",{className:"border-t border-gray-700 pt-4",children:(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-100",placeholder:"Add new TODO item...",onKeyPress:e=>{"Enter"===e.key&&u.trim()&&(d(c?"".concat(c,"\n- ").concat(u.trim()):"- ".concat(u.trim())),m(""))}}),(0,o.jsx)("button",{onClick:()=>{u.trim()&&(d(c?"".concat(c,"\n- ").concat(u.trim()):"- ".concat(u.trim())),m(""))},className:"btn-accent px-4",disabled:!u.trim(),children:"Add"})]})})]})}function f(e){let{onResize:t,edge:n,className:i="",onDoubleClick:a}=e,[l,r]=(0,s.useState)(!1),[c,d]=(0,s.useState)({x:0,y:0}),[h,u]=(0,s.useState)({width:0,height:0}),m=e=>{if(l&&t){let o=e.clientX-c.x,s=e.clientY-c.y,i=h.width,a=h.height;switch(n){case"top":a=h.height-s;break;case"bottom":a=h.height+s;break;case"left":i=h.width-o;break;case"right":i=h.width+o}t({width:Math.max(200,i),height:Math.max(150,a)})}},x=()=>{r(!1)};return(0,s.useEffect)(()=>{if(l)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",x)}},[l,c,h]),(0,o.jsx)("div",{className:i,style:(()=>{let e={position:"absolute",backgroundColor:"transparent"};switch(n){case"top":return{...e,top:"0",left:"8px",right:"8px",height:"4px",cursor:"n-resize"};case"bottom":return{...e,bottom:"0",left:"8px",right:"8px",height:"4px",cursor:"s-resize"};case"left":return{...e,left:"0",top:"8px",bottom:"8px",width:"4px",cursor:"w-resize"};case"right":return{...e,right:"0",top:"8px",bottom:"8px",width:"4px",cursor:"e-resize"};default:return e}})(),onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),r(!0),d({x:e.clientX,y:e.clientY});let t=e.target.closest("[data-resizable]");if(t){let e=t.getBoundingClientRect();u({width:e.width,height:e.height})}}})}function y(e){let{onResize:t,corner:n,className:i=""}=e,[a,l]=(0,s.useState)(!1),[r,c]=(0,s.useState)({x:0,y:0}),[d,h]=(0,s.useState)({width:0,height:0}),u=e=>{if(a&&t){let o=e.clientX-r.x,s=e.clientY-r.y,i=d.width,a=d.height;switch(n){case"top-left":i=d.width-o,a=d.height-s;break;case"top-right":i=d.width+o,a=d.height-s;break;case"bottom-left":i=d.width-o,a=d.height+s;break;case"bottom-right":i=d.width+o,a=d.height+s}t({width:Math.max(200,i),height:Math.max(150,a)})}},m=()=>{l(!1)};return(0,s.useEffect)(()=>{if(a)return document.addEventListener("mousemove",u),document.addEventListener("mouseup",m),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m)}},[a,r,d]),(0,o.jsx)("div",{className:i,style:(()=>{let e={position:"absolute",width:"16px",height:"16px",backgroundColor:"transparent"};switch(n){case"top-left":return{...e,top:"0",left:"0",cursor:"nw-resize"};case"top-right":return{...e,top:"0",right:"0",cursor:"ne-resize"};case"bottom-left":return{...e,bottom:"0",left:"0",cursor:"sw-resize"};case"bottom-right":return{...e,bottom:"0",right:"0",cursor:"se-resize"};default:return e}})(),onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),l(!0),c({x:e.clientX,y:e.clientY});let t=e.target.closest("[data-resizable]");if(t){let e=t.getBoundingClientRect();h({width:e.width,height:e.height})}}})}function b(e){let{onClose:t,onNodeSelect:n,onFocus:i,onNodeClick:a,hideTitle:l=!1,highlightedNode:r,onHighlightReceived:d}=e,h=()=>({x:24,y:105,width:350,height:Math.max(250,Math.floor((window.innerHeight-81)/2))-48}),[u,m]=(0,s.useState)({x:24,y:105}),[x,g]=(0,s.useState)({width:350,height:300}),[p,b]=(0,s.useState)(!1),[v,j]=(0,s.useState)({x:0,y:0}),N=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=h();m({x:e.x,y:e.y}),g({width:e.width,height:e.height})},[]);let w=e=>{p&&m({x:e.clientX-v.x,y:e.clientY-v.y})},_=()=>{b(!1)};return(0,s.useEffect)(()=>{if(p)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",_),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",_)}},[p,v,u]),(0,s.useEffect)(()=>{let e=()=>{let e=h();m({x:e.x,y:e.y}),g({width:e.width,height:e.height})};return window.addEventListener("resetFloatingPositions",e),()=>window.removeEventListener("resetFloatingPositions",e)},[]),(0,o.jsxs)("div",{ref:N,"data-resizable":!0,className:"absolute bg-gray-800 border border-gray-700 rounded-3xl shadow-2xl overflow-hidden light:bg-gray-200 light:border-gray-400",style:{left:"".concat(u.x,"px"),top:"".concat(u.y,"px"),width:"".concat(x.width,"px"),height:"".concat(x.height,"px"),zIndex:50},onMouseDown:e=>{null==i||i(),e.target.closest(".drag-handle")&&(b(!0),j({x:e.clientX-u.x,y:e.clientY-u.y}))},onClick:()=>null==i?void 0:i(),children:[(0,o.jsxs)("div",{className:"drag-handle flex items-center justify-between p-4 bg-gray-700 border-b border-gray-600 cursor-move light:bg-gray-300 light:border-gray-400",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold text-gray-100 light:text-gray-900 select-none",children:"Nodes"}),(0,o.jsx)("button",{onClick:t,className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-red-600 flex items-center justify-center transition-colors duration-200 light:bg-gray-400 light:hover:bg-red-500",children:(0,o.jsx)("span",{className:"text-gray-100 text-xl font-bold light:text-gray-900",children:"\xd7"})})]}),(0,o.jsx)("div",{className:"p-4 overflow-y-auto",style:{height:"calc(100% - 60px)"},children:(0,o.jsx)(c,{onNodeSelect:n,onNodeClick:a,highlightedNode:r,onHighlightReceived:d,className:"bg-transparent border-none p-0"})}),(0,o.jsx)(f,{edge:"top",onResize:g}),(0,o.jsx)(f,{edge:"bottom",onResize:g}),(0,o.jsx)(f,{edge:"left",onResize:g}),(0,o.jsx)(f,{edge:"right",onResize:g}),(0,o.jsx)(y,{corner:"top-left",onResize:g}),(0,o.jsx)(y,{corner:"top-right",onResize:g}),(0,o.jsx)(y,{corner:"bottom-left",onResize:g}),(0,o.jsx)(y,{corner:"bottom-right",onResize:g})]})}function v(e){let{node:t,onClose:n,onUpdateNode:i,onRunNode:a,onFocus:l,flaskAvailable:r}=e,[c,d]=(0,s.useState)({x:200,y:150}),[h,u]=(0,s.useState)({width:576,height:600}),[m,x]=(0,s.useState)(!1),[g,b]=(0,s.useState)({x:0,y:0}),v=(0,s.useRef)(null),j=e=>{m&&d({x:e.clientX-g.x,y:e.clientY-g.y})},N=()=>{x(!1)};return((0,s.useEffect)(()=>{if(m)return document.addEventListener("mousemove",j),document.addEventListener("mouseup",N),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",N)}},[m,g,c]),(0,s.useEffect)(()=>{let e=()=>{let e=(()=>{let e=window.innerWidth;return{x:Math.floor(e/3)+20,y:100,width:Math.floor(2*e/3)-40,height:Math.floor((window.innerHeight-81)/2)-20}})();d({x:e.x,y:e.y}),u({width:e.width,height:e.height})};return window.addEventListener("resetFloatingPositions",e),()=>window.removeEventListener("resetFloatingPositions",e)},[]),t)?(0,o.jsxs)("div",{ref:v,"data-resizable":!0,className:"absolute bg-gray-800 border border-gray-700 rounded-3xl shadow-2xl overflow-hidden light:bg-gray-200 light:border-gray-400",style:{left:"".concat(c.x,"px"),top:"".concat(c.y,"px"),width:"".concat(h.width,"px"),height:"".concat(h.height,"px"),zIndex:50},onMouseDown:e=>{null==l||l(),e.target.closest(".drag-handle")&&(x(!0),b({x:e.clientX-c.x,y:e.clientY-c.y}))},onClick:()=>null==l?void 0:l(),children:[(0,o.jsxs)("div",{className:"drag-handle flex items-center justify-between p-4 bg-gray-700 border-b border-gray-600 cursor-move light:bg-gray-300 light:border-gray-400",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold text-gray-100 light:text-gray-900 select-none",children:"Node Details"}),(0,o.jsx)("button",{onClick:n,className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-red-600 flex items-center justify-center transition-colors duration-200 light:bg-gray-400 light:hover:bg-red-500",children:(0,o.jsx)("span",{className:"text-gray-100 text-xl font-bold light:text-gray-900",children:"\xd7"})})]}),(0,o.jsx)("div",{className:"overflow-y-auto",style:{height:"calc(100% - 60px)"},children:(0,o.jsx)(p,{node:t,onUpdateNode:i,onRunNode:a,flaskAvailable:r})}),(0,o.jsx)(f,{edge:"top",onResize:u}),(0,o.jsx)(f,{edge:"bottom",onResize:u}),(0,o.jsx)(f,{edge:"left",onResize:u}),(0,o.jsx)(f,{edge:"right",onResize:u}),(0,o.jsx)(y,{corner:"top-left",onResize:u}),(0,o.jsx)(y,{corner:"top-right",onResize:u}),(0,o.jsx)(y,{corner:"bottom-left",onResize:u}),(0,o.jsx)(y,{corner:"bottom-right",onResize:u})]}):null}function j(e){let{onNodeSelect:t,onClose:n,onFocus:i,isFullWidth:a=!1,hideTitle:l=!1,onHighlightInList:r}=e,c=()=>{let e=window.innerWidth,t=window.innerHeight-81,n=Math.max(250,Math.floor(t/2));return{x:24,y:81+n+24,width:e-48,height:t-n-48}},[h,u]=(0,s.useState)({x:24,y:400}),[m,x]=(0,s.useState)({width:800,height:300}),[g,p]=(0,s.useState)(!1),[b,v]=(0,s.useState)({x:0,y:0}),j=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=c();u({x:e.x,y:e.y}),x({width:e.width,height:e.height})},[]);let N=e=>{g&&u({x:e.clientX-b.x,y:e.clientY-b.y})},w=()=>{p(!1)};return(0,s.useEffect)(()=>{if(g)return document.addEventListener("mousemove",N),document.addEventListener("mouseup",w),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",w)}},[g,b,h]),(0,s.useEffect)(()=>{let e=()=>{let e=c();u({x:e.x,y:e.y}),x({width:e.width,height:e.height})};return window.addEventListener("resetFloatingPositions",e),()=>window.removeEventListener("resetFloatingPositions",e)},[]),(0,o.jsxs)("div",{ref:j,"data-resizable":!0,className:"absolute bg-gray-800 border border-gray-700 rounded-3xl shadow-2xl overflow-hidden light:bg-gray-200 light:border-gray-400",style:{left:"".concat(h.x,"px"),top:"".concat(h.y,"px"),width:"".concat(m.width,"px"),height:"".concat(m.height,"px"),zIndex:45},onMouseDown:e=>{null==i||i(),e.target.closest(".drag-handle")&&(p(!0),v({x:e.clientX-h.x,y:e.clientY-h.y}))},onClick:()=>null==i?void 0:i(),children:[(0,o.jsxs)("div",{className:"drag-handle flex items-center justify-between p-4 bg-gray-700 border-b border-gray-600 cursor-move light:bg-gray-300 light:border-gray-400",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold text-gray-100 light:text-gray-900 select-none",children:"Pipeline Flow"}),(0,o.jsx)("button",{onClick:n,className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-red-600 flex items-center justify-center transition-colors duration-200 light:bg-gray-400 light:hover:bg-red-500",children:(0,o.jsx)("span",{className:"text-gray-100 text-xl font-bold light:text-gray-900",children:"\xd7"})})]}),(0,o.jsx)("div",{className:"h-[calc(100%-60px)] overflow-hidden",children:(0,o.jsx)(d,{className:"h-full",onNodeSelect:t,isFloating:!0,hideTitle:!0,onHighlightInList:r})}),!a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{edge:"top",onResize:x}),(0,o.jsx)(f,{edge:"bottom",onResize:x}),(0,o.jsx)(f,{edge:"left",onResize:x}),(0,o.jsx)(f,{edge:"right",onResize:x}),(0,o.jsx)(y,{corner:"top-left",onResize:x}),(0,o.jsx)(y,{corner:"top-right",onResize:x}),(0,o.jsx)(y,{corner:"bottom-left",onResize:x}),(0,o.jsx)(y,{corner:"bottom-right",onResize:x})]})]})}let N="data-pipeline-admin-state";function w(){let e=window.location.hash.slice(1);if(!e)return{};let t={};return e.split("&").forEach(e=>{let[n,o]=e.split("=");n&&(t[decodeURIComponent(n)]=o?decodeURIComponent(o):"")}),t}function _(e){let t={...w(),...e};Object.keys(t).forEach(e=>{(""===t[e]||null===t[e]||void 0===t[e])&&delete t[e]});let n=Object.entries(t).map(e=>{let[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&");window.location.hash=n,document.dispatchEvent(new CustomEvent("hashChangeEvent",{detail:t}))}function k(e){try{let t={...E(),...e};localStorage.setItem(N,JSON.stringify(t))}catch(e){console.warn("Failed to save state to localStorage:",e)}}function E(){try{let e=localStorage.getItem(N);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load state from localStorage:",e)}return{view:"column",selectedNodeId:null}}function S(){let[e,t]=(0,s.useState)(!1),[n,i]=(0,s.useState)([]),[l,h]=(0,s.useState)(null),[u,f]=(0,s.useState)("column"),[y,N]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1),[z,L]=(0,s.useState)(!1),[R,M]=(0,s.useState)({list:40,chart:41,detail:42}),[F,P]=(0,s.useState)(null),[D,I]=(0,s.useState)(null);(0,s.useEffect)(()=>{t(!0);let e=function(){let e=w(),t=E();return{view:e.view||t.view||"column",selectedNodeId:e.node||t.selectedNodeId||null}}();f(e.view),"floating"===e.view?(N(!0),L(!0)):"full"===e.view&&(N(!1),L(!1))},[]),(0,s.useEffect)(()=>{e&&(async()=>{try{let e=await fetch("/data-pipeline/nodes.csv");if(e.ok){let t=(await e.text()).split("\n").filter(e=>e.trim()),n=t[0].split(",").map(e=>e.trim()),o=[];for(let e=1;e<t.length;e++){let s=T(t[e]);if(s.length>=n.length-1){let e={};n.forEach((t,n)=>{e[t.trim()]=s[n]?s[n].trim():""}),o.push(e)}}i(o);let s=w();if(s.node){let e=o.find(e=>e.node_id===s.node);e&&h(e)}else"full"===u&&o.length>0&&(h(o[0]),_({node:o[0].node_id}))}}catch(e){console.error("Failed to load nodes:",e)}})()},[e]);let T=e=>{let t=[],n="",o=!1;for(let s=0;s<e.length;s++){let i=e[s];'"'===i&&(0===s||","===e[s-1])?o=!0:'"'===i&&o&&(s===e.length-1||","===e[s+1])?o=!1:","!==i||o?n+=i:(t.push(n.trim()),n="")}return t.push(n.trim()),t};(0,s.useEffect)(()=>{if(e){var t=e=>{if(e.view&&e.view!==u&&A(e.view,!1),e.node&&(!l||e.node!==l.node_id)){let t=n.find(t=>t.node_id===e.node);t&&h(t)}};let e=()=>{t(w())};return window.addEventListener("hashchange",e),document.addEventListener("hashChangeEvent",e=>{t(e.detail||w())}),()=>{window.removeEventListener("hashchange",e)}}},[e,u,l,n]);let A=(0,s.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];f(e),k({view:e}),t&&_({view:e}),"floating"===e?(N(!0),L(!0),C(!!l),setTimeout(()=>{window.dispatchEvent(new CustomEvent("resetFloatingPositions"))},100)):(N(!1),L(!1),C(!1))},[l]),O=(0,s.useCallback)(e=>{h(e),k({selectedNodeId:null==e?void 0:e.node_id}),_({node:null==e?void 0:e.node_id}),"floating"===u&&C(!0)},[u]),X=e=>{h(e)},Y=(e,t)=>{console.log("Node run result:",{node:e,result:t})},U=e=>{let t=Math.max(...Object.values(R));M(n=>({...n,[e]:t+1}))},H=e=>{P(e),U("detail"),setTimeout(()=>P(null),3e3)};(0,s.useEffect)(()=>{let e=async()=>{I(await g())};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]);let B=async()=>{m=null,x=null,I(await g())};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a(),{children:[(0,o.jsx)("title",{children:"Data Pipeline Admin"}),(0,o.jsx)("meta",{name:"description",content:"Data Pipeline Administration Interface"}),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsxs)("div",{className:"admin-container",children:[e&&!1===D&&(0,o.jsxs)("div",{className:"flask-banner",children:[(0,o.jsxs)("div",{className:"flask-banner-content",children:[(0,o.jsx)("span",{className:"flask-banner-icon",children:"⚠️"}),(0,o.jsx)("span",{className:"flask-banner-text",children:"Flask Server is not running on port 5001"})]}),(0,o.jsxs)("div",{className:"flask-banner-actions",children:[(0,o.jsx)("button",{onClick:B,className:"flask-banner-btn retry",children:"Retry Check"}),(0,o.jsx)("a",{href:"../flask",target:"_blank",className:"flask-banner-btn activate",children:"Activate Flask Server"})]})]}),(0,o.jsxs)("div",{className:"top-bar",children:[(0,o.jsxs)("div",{className:"layout-buttons",children:[(0,o.jsx)("button",{onClick:()=>A("column"),className:"btn btn-layout ".concat("column"===u?"btn-primary":""),title:"Column Layout",children:(0,o.jsxs)("svg",{className:"layout-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("rect",{x:"2",y:"3",width:"6",height:"18",rx:"1"}),(0,o.jsx)("rect",{x:"10",y:"3",width:"12",height:"18",rx:"1"})]})}),(0,o.jsx)("button",{onClick:()=>A("full"),className:"btn btn-layout ".concat("full"===u?"btn-primary":""),title:"Full Width Layout",children:(0,o.jsxs)("svg",{className:"layout-icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("rect",{x:"2",y:"3",width:"20",height:"8",rx:"1"}),(0,o.jsx)("rect",{x:"2",y:"13",width:"20",height:"8",rx:"1"})]})}),(0,o.jsx)("button",{onClick:()=>A("floating"),className:"btn btn-layout ".concat("floating"===u?"btn-primary":""),title:"Floating Layout",children:(0,o.jsx)("span",{className:"layout-icon",children:"⧉"})})]}),(0,o.jsx)(r,{})]}),"column"===u&&(0,o.jsxs)("div",{className:"layout-column",children:[(0,o.jsx)("div",{className:"column-sidebar",children:(0,o.jsx)(c,{onNodeSelect:O,onNodeClick:()=>U("detail"),highlightedNode:F,onHighlightReceived:h,selectedNode:l})}),(0,o.jsxs)("div",{className:"column-main",children:[l&&(0,o.jsx)("div",{className:"column-detail-section",children:(0,o.jsxs)("div",{className:"column-detail-panel",children:[(0,o.jsxs)("div",{className:"column-detail-header",children:[(0,o.jsx)("h2",{children:"Node Details"}),(0,o.jsx)("button",{onClick:()=>{h(null),_({node:null})},className:"close-btn",children:"\xd7"})]}),(0,o.jsx)("div",{className:"column-detail-content",children:(0,o.jsx)(p,{node:l,onUpdateNode:X,onRunNode:Y,flaskAvailable:D})})]})}),(0,o.jsx)("div",{className:"column-flow-section",children:(0,o.jsx)(d,{onNodeSelect:O,isFloating:!1,onHighlightInList:H,focusedNode:l})})]})]}),"full"===u&&(0,o.jsxs)("div",{className:"layout-fullwidth",children:[(0,o.jsxs)("div",{className:"fullwidth-top",children:[(0,o.jsx)("div",{className:"fullwidth-list",children:(0,o.jsx)(c,{onNodeSelect:O,onNodeClick:()=>{},highlightedNode:F,onHighlightReceived:h,selectedNode:l,compact:!0})}),l&&(0,o.jsxs)("div",{className:"fullwidth-detail",children:[(0,o.jsxs)("div",{className:"fullwidth-detail-header",children:[(0,o.jsx)("h2",{children:"Node Details"}),(0,o.jsx)("button",{onClick:()=>{h(null),_({node:null})},className:"close-btn",children:"\xd7"})]}),(0,o.jsx)("div",{className:"fullwidth-detail-content",children:(0,o.jsx)(p,{node:l,onUpdateNode:X,onRunNode:Y,flaskAvailable:D})})]})]}),(0,o.jsx)("div",{className:"fullwidth-bottom",children:(0,o.jsx)(d,{onNodeSelect:O,isFloating:!1,onHighlightInList:H})})]}),"floating"===u&&(0,o.jsx)("div",{className:"layout-floating",children:!y&&!z&&(0,o.jsxs)("div",{className:"floating-empty",children:[(0,o.jsx)("button",{onClick:()=>{N(!0),L(!0),setTimeout(()=>{window.dispatchEvent(new CustomEvent("resetFloatingPositions"))},100)},className:"floating-open-btn",children:(0,o.jsx)("span",{children:"⧉"})}),(0,o.jsx)("h3",{children:"Floating Mode Active"}),(0,o.jsx)("p",{className:"text-muted",children:"Click the icon above to open floating panels"})]})}),"floating"===u&&y&&(0,o.jsx)("div",{className:"floating-wrapper",style:{zIndex:R.list},children:(0,o.jsx)(b,{onClose:()=>N(!1),onNodeSelect:O,onFocus:()=>U("list"),onNodeClick:()=>U("detail"),highlightedNode:F,onHighlightReceived:h,hideTitle:!0})}),"floating"===u&&z&&(0,o.jsx)("div",{className:"floating-wrapper",style:{zIndex:R.chart},children:(0,o.jsx)(j,{onNodeSelect:O,onClose:()=>L(!1),onFocus:()=>U("chart"),isFullWidth:!1,hideTitle:!0,onHighlightInList:H})}),"floating"===u&&S&&l&&(0,o.jsx)("div",{className:"floating-wrapper",style:{zIndex:R.detail},children:(0,o.jsx)(v,{node:l,onClose:()=>C(!1),onUpdateNode:X,onRunNode:Y,onFocus:()=>U("detail"),flaskAvailable:D})})]})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=2936)),_N_E=e.O()}]);